<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <!-- Background -->
  <rect width="900" height="600" fill="#1a202c"/>

  <!-- Title -->
  <text x="450" y="40" font-family="system-ui, sans-serif" font-size="26" font-weight="bold" fill="#f0db4f" text-anchor="middle">
    Transformaciones Avanzadas de Datos
  </text>

  <!-- Section 1: Grouping with Reduce -->
  <g>
    <rect x="50" y="70" width="400" height="160" fill="#2d3748" stroke="#48bb78" stroke-width="2" rx="5"/>

    <text x="250" y="95" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#48bb78" text-anchor="middle">
      1. AGRUPAR (Grouping)
    </text>

    <text x="70" y="118" font-family="system-ui, sans-serif" font-size="10" fill="#cbd5e0">
      Objetivo: Agrupar por propiedad
    </text>

    <rect x="60" y="128" width="380" height="55" fill="#1a202c" stroke="#4299e1" stroke-width="1" rx="2"/>
    <text x="75" y="143" font-family="Courier, monospace" font-size="9" fill="#4299e1">
      users.reduce((groups, user) => {
    </text>
    <text x="75" y="156" font-family="Courier, monospace" font-size="9" fill="#4299e1">
        const cat = user.role;
    </text>
    <text x="75" y="169" font-family="Courier, monospace" font-size="9" fill="#4299e1">
        groups[cat] = [...(groups[cat] || []), user];
    </text>
    <text x="75" y="182" font-family="Courier, monospace" font-size="9" fill="#4299e1">
        return groups;
    </text>

    <text x="70" y="205" font-family="system-ui, sans-serif" font-size="9" fill="#e2e8f0" font-style="italic">
      Resultado: {admin: [...], user: [...], guest: [...]}
    </text>
  </g>

  <!-- Section 2: Aggregation -->
  <g>
    <rect x="470" y="70" width="400" height="160" fill="#2d3748" stroke="#4299e1" stroke-width="2" rx="5"/>

    <text x="670" y="95" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#4299e1" text-anchor="middle">
      2. AGREGAR (Aggregation)
    </text>

    <text x="490" y="118" font-family="system-ui, sans-serif" font-size="10" fill="#cbd5e0">
      Objetivo: Calcular estadísticas
    </text>

    <rect x="480" y="128" width="380" height="55" fill="#1a202c" stroke="#4299e1" stroke-width="1" rx="2"/>
    <text x="495" y="143" font-family="Courier, monospace" font-size="9" fill="#4299e1">
      data.reduce((stats, item) => ({
    </text>
    <text x="495" y="156" font-family="Courier, monospace" font-size="9" fill="#4299e1">
        total: stats.total + item.price,
    </text>
    <text x="495" y="169" font-family="Courier, monospace" font-size="9" fill="#4299e1">
        count: stats.count + 1,
    </text>
    <text x="495" y="182" font-family="Courier, monospace" font-size="9" fill="#4299e1">
        avg: stats.total / (stats.count + 1)
    </text>

    <text x="490" y="205" font-family="system-ui, sans-serif" font-size="9" fill="#e2e8f0" font-style="italic">
      Resultado: {total: 1500, count: 5, avg: 300}
    </text>
  </g>

  <!-- Section 3: Normalization -->
  <g>
    <rect x="50" y="260" width="400" height="160" fill="#2d3748" stroke="#ef4444" stroke-width="2" rx="5"/>

    <text x="250" y="285" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#ef4444" text-anchor="middle">
      3. NORMALIZAR (Normalization)
    </text>

    <text x="70" y="308" font-family="system-ui, sans-serif" font-size="10" fill="#cbd5e0">
      Objetivo: Estructurar datos denormalizado
    </text>

    <rect x="60" y="318" width="380" height="55" fill="#1a202c" stroke="#4299e1" stroke-width="1" rx="2"/>
    <text x="75" y="333" font-family="Courier, monospace" font-size="9" fill="#4299e1">
      const normalized = {
    </text>
    <text x="75" y="346" font-family="Courier, monospace" font-size="9" fill="#4299e1">
        users: data.users.reduce(...),
    </text>
    <text x="75" y="359" font-family="Courier, monospace" font-size="9" fill="#4299e1">
        posts: data.posts.reduce(...),
    </text>
    <text x="75" y="372" font-family="Courier, monospace" font-size="9" fill="#4299e1">
        comments: data.comments.reduce(...)
    </text>

    <text x="70" y="395" font-family="system-ui, sans-serif" font-size="9" fill="#e2e8f0" font-style="italic">
      Estructura plana más fácil de acceder
    </text>
  </g>

  <!-- Section 4: Pivoting -->
  <g>
    <rect x="470" y="260" width="400" height="160" fill="#2d3748" stroke="#a78bfa" stroke-width="2" rx="5"/>

    <text x="670" y="285" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#a78bfa" text-anchor="middle">
      4. PIVOTAR (Pivoting)
    </text>

    <text x="490" y="308" font-family="system-ui, sans-serif" font-size="10" fill="#cbd5e0">
      Objetivo: Cambiar estructura (rows → cols)
    </text>

    <rect x="480" y="318" width="380" height="55" fill="#1a202c" stroke="#4299e1" stroke-width="1" rx="2"/>
    <text x="495" y="333" font-family="Courier, monospace" font-size="9" fill="#4299e1">
      // Rows:  {month: 'Jan', sales: 100}
    </text>
    <text x="495" y="346" font-family="Courier, monospace" font-size="9" fill="#4299e1">
      // Cols: {Jan: 100, Feb: 150, ...}
    </text>
    <text x="495" y="359" font-family="Courier, monospace" font-size="9" fill="#4299e1">
      const pivot = data.reduce((acc, row) => {
    </text>
    <text x="495" y="372" font-family="Courier, monospace" font-size="9" fill="#4299e1">
        acc[row.month] = row.sales;
    </text>

    <text x="490" y="395" font-family="system-ui, sans-serif" font-size="9" fill="#e2e8f0" font-style="italic">
      Fácil acceso y mejor rendimiento
    </text>
  </g>

  <!-- Pipeline example -->
  <rect x="50" y="450" width="820" height="125" fill="#2d3748" stroke="#f0db4f" stroke-width="2" rx="5"/>

  <text x="450" y="475" font-family="system-ui, sans-serif" font-size="13" font-weight="bold" fill="#f0db4f" text-anchor="middle">
    PIPELINE: Combinar Transformaciones
  </text>

  <rect x="70" y="495" width="780" height="70" fill="#1a202c" stroke="#4299e1" stroke-width="1" rx="2"/>
  <text x="85" y="510" font-family="Courier, monospace" font-size="10" fill="#4299e1">
    const result = data
  </text>
  <text x="85" y="525" font-family="Courier, monospace" font-size="10" fill="#4299e1">
      .filter(item => item.active)
  </text>
  <text x="85" y="540" font-family="Courier, monospace" font-size="10" fill="#4299e1">
      .map(item => ({...item, total: item.qty * item.price}))
  </text>
  <text x="85" y="555" font-family="Courier, monospace" font-size="10" fill="#4299e1">
      .reduce((stats, item) => ({...stats, sum: stats.sum + item.total}), {sum: 0});
  </text>
</svg>
